<div class="row mx-0 pt-5">
  <div style="width: 500px" class="p-5 rounded bg-dark text-white p-2">
    <h2 class="text-center text-white">Data Editor</h2>

    <form (ngSubmit)="onSubmit()" [formGroup]="editor">
      <div *ngFor="let control of headerControls" class="form-group py-2">
        <label class="text-white" [hidden]="!control.visible">
          {{ control.label }}
        </label>
        <ng-container [ngSwitch]="control.type">
          <select
            class="form-control bg-light"
            [(ngModel)]="
              control.key === 'catName'
                ? item['category'].name
                : control.key === 'catId'
                ? item['category'].id
                : control.key === 'catDescription'
                ? item['category'].description
                : control.key === 'addCountry'
                ? item['address'].country
                : control.key === 'addNotes'
                ? item['address'].notes
                : item[control.key]
            "
            *ngSwitchCase="'select'"
            [formControlName]="control.key"
            [name]="control.key"
            [hidden]="!control.visible"
          >
            <option *ngFor="let opt of control.options" [value]="opt">
              {{ opt }}
            </option>
          </select>
          <textarea
            class="form-control bg-light"
            *ngSwitchCase="'textarea'"
            [formControlName]="control.key"
            [name]="control.key"
            [hidden]="!control.visible"
            [(ngModel)]="item[control.key]"
          ></textarea>
          <input
            class="bg-light border-0 form-check-input"
            *ngSwitchCase="'checkbox'"
            [(ngModel)]="item[control.key]"
            [formControlName]="control.key"
            [name]="control.key"
            [type]="control.type || 'text'"
            [hidden]="!control.visible"
            [checked]="item[control.key]"
          />
          <input
            class="form-control bg-light"
            *ngSwitchDefault
            [(ngModel)]="
              control.key === 'addZip'
                ? item['address'].zip
                : control.key === 'addCity'
                ? item['address'].city
                : control.key === 'addStreet'
                ? item['address'].street
                : item[control.key]
            "
            [formControlName]="control.key"
            [name]="control.key"
            [type]="control.type || 'text'"
            [hidden]="!control.visible"
          />
        </ng-container>
      </div>

      <button
        [disabled]="editor.invalid"
        type="submit"
        class="btn btn-block my-2 w-100"
        [ngClass]="editor.valid ? 'btn-success' : 'btn-error'"
      >
        Save
      </button>
    </form>
  </div>
</div>
